Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 30
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	12	bam_index_and_2bw
	1	build_index
	12	feature_count
	12	genome_map
	10	rRNA_map
	12	sam_2_uniquebam
	11	sort_STAR_result
	12	uniquebam_sort_and_index
	83

rule sort_STAR_result:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate1, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate2
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate1_sort, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate2_sort
    jobid: 1
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS1


rule genome_map:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS2/PS2Unmapped.out.mate1_sort, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS2/PS2Unmapped.out.mate2_sort
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_SortAligned.out.sam
    jobid: 25
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS2


rule rRNA_map:
    input: /zhounas/zhoulab/backup/xhyu/20171012JL/HB160055-01武汉大学12个人lncRNA建库测序过滤任务单_VIP/ANHB160055_HB160055-01_2017-01-09/Cleandata/N01/N01_R1.fq.gz, /zhounas/zhoulab/backup/xhyu/20171012JL/HB160055-01武汉大学12个人lncRNA建库测序过滤任务单_VIP/ANHB160055_HB160055-01_2017-01-09/Cleandata/N01/N01_R2.fq.gz
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/N01/N01Unmapped.out.mate1, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/N01/N01Unmapped.out.mate2
    jobid: 31
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=N01
    threads: 20

Finished job 25.
1 of 83 steps (1%) done

rule sam_2_uniquebam:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_SortAligned.out.sam
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq.bam
    jobid: 24
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS2

Finished job 24.
2 of 83 steps (2%) done

rule uniquebam_sort_and_index:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq.bam
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam
    jobid: 13
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS2

Finished job 1.
3 of 83 steps (4%) done

rule genome_map:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate1_sort, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/rRNA/PS1/PS1Unmapped.out.mate2_sort
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS1/PS1_SortAligned.out.sam
    jobid: 72
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS1

Finished job 13.
4 of 83 steps (5%) done

rule feature_count:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/03_featurecount/PS2_featureCounts.txt, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/03_featurecount/PS2_featureStat.log
    jobid: 3
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS2


rule bam_index_and_2bw:
    input: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam.bai, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/bw/PS2.bw
    jobid: 70
    wildcards: work_dir=/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results, dataset=PS2

Error in rule feature_count:
    jobid: 3
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/03_featurecount/PS2_featureCounts.txt, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/03_featurecount/PS2_featureStat.log

RuleException:
CalledProcessError in line 143 of /data2/zhoulab/yuxinghai/hg19_jlRNAseq/snakemake/hg19_Snakefile.py:
Command ' set -euo pipefail;  Rscript /data2/zhoulab/yuxinghai/hg19_jlRNAseq/bin/script/featurecount.R ' returned non-zero exit status 2
  File "/data2/zhoulab/yuxinghai/hg19_jlRNAseq/snakemake/hg19_Snakefile.py", line 143, in __rule_feature_count
  File "/data1/zhoulab/yuxinghai/.conda/envs/py35/lib/python3.5/concurrent/futures/thread.py", line 55, in run
Error in rule bam_index_and_2bw:
    jobid: 70
    output: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam.bai, /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/bw/PS2.bw

RuleException:
CalledProcessError in line 129 of /data2/zhoulab/yuxinghai/hg19_jlRNAseq/snakemake/hg19_Snakefile.py:
Command ' set -euo pipefail;  
        samtools index /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam
        bam2wig.py -i /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam -o /data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/bw/PS2 -t 1000000000 -s /data2/zhoulab/yuxinghai/hg19_jlRNAseq/anno/hg19.chrom.sizes -u ' returned non-zero exit status 127
  File "/data2/zhoulab/yuxinghai/hg19_jlRNAseq/snakemake/hg19_Snakefile.py", line 129, in __rule_bam_index_and_2bw
  File "/data1/zhoulab/yuxinghai/.conda/envs/py35/lib/python3.5/concurrent/futures/thread.py", line 55, in run
Removing output files of failed job bam_index_and_2bw since they might be corrupted:
/data2/zhoulab/yuxinghai/hg19_jlRNAseq/results/02_mapping/sorted/PS2/PS2_uniq_sort.bam.bai
Finished job 31.
5 of 83 steps (6%) done
Finished job 72.
6 of 83 steps (7%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data2/zhoulab/yuxinghai/hg19_jlRNAseq/snakemake/.snakemake/log/2018-03-30T151141.570108.snakemake.log
